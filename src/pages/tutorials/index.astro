---
import Layout from "~/layouts/PageLayout.astro";
import HeroText from "~/components/widgets/HeroText.astro";
import { getCollection } from "astro:content";
import Image from "~/components/common/Image.astro";

const metadata = {
    title: "教程列表",
};

const products = await getCollection("products");
---

<Layout metadata={metadata}>
    <HeroText
        tagline="Tutorials"
        title="我的教程"
        subtitle="分享我的编程经验和技术心得，助你快速成长。"
    />

    <section class="max-w-6xl mx-auto px-4 sm:px-6 py-12 lg:py-20">
        <div class="grid gap-6 row-gap-5 md:grid-cols-2 lg:grid-cols-4 -mb-6">
            {
                products.map((product) => (
                    <div class="mb-6 transition hover:-translate-y-1 hover:shadow-lg duration-300">
                        <a
                            href={`/tutorials/${product.slug}`}
                            class="block h-full flex flex-col bg-white dark:bg-slate-900 rounded-lg shadow border border-gray-200 dark:border-gray-700"
                        >
                            <div class="relative overflow-hidden bg-gray-400 dark:bg-slate-700 rounded-t-lg aspect-[16/9]">
                                {product.data.image && (
                                    <Image
                                        src={product.data.image}
                                        class="object-cover w-full h-full"
                                        widths={[400, 768]}
                                        alt={product.data.title}
                                    />
                                )}
                            </div>
                            <div class="p-6 flex flex-col flex-1">
                                <h3 class="mb-2 text-xl font-bold leading-tight sm:text-2xl font-heading">
                                    {product.data.title}
                                </h3>
                                {product.data.description && (
                                    <p class="text-muted dark:text-slate-400 text-md flex-1">
                                        {product.data.description}
                                    </p>
                                )}
                                <div class="mt-4 flex items-center justify-between">
                                    <span class="text-2xl font-bold text-primary">
                                        ¥{product.data.price}
                                    </span>
                                    <span class="text-blue-600 hover:underline">
                                        查看详情 &rarr;
                                    </span>
                                </div>
                            </div>
                        </a>
                    </div>
                ))
            }
        </div>
    </section>
</Layout>
